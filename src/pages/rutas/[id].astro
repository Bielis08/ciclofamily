---
import { getCollection, render } from "astro:content";
import BtnRutas from "../../components/BtnRutas.astro";
import Layout from "../../layouts/Layout.astro";
import MiniHeader from "../../components/MiniHeader.astro";

export async function getStaticPaths() {
    const rutas = await getCollection('rutas')
    
    return rutas.map((ruta) => ({
        params: { id: ruta.slug },
        props: { ruta }
    }))
}

const { ruta } = Astro.props
const { data } = ruta
const { titulo, destino, portada, distancia, desnivel, alt_max, alt_min, dificultad, color, bgcolor, mapa_img, desnivel_img } = data

const { Content } = await render(ruta)
---
<Layout title={titulo}>
    <title>Ruta en bicicleta: {titulo}</title>
    <meta name="description" content={`Descubre la ruta en bicicleta ${titulo}. Una actividad perfecta para explorar ${destino} con una distancia de ${distancia} km y un desnivel de ${desnivel} m.`} />
    <meta name="keywords" content="rutas en bicicleta, rutas por Catalunya, rutas familiares, ciclismo, turismo en bicicleta, {destino}, {titulo}" />
    <meta property="og:title" content={`Ruta en bicicleta: ${titulo}`} />
    <meta property="og:description" content={`Explora la ruta ${titulo} con una distancia de ${distancia} km en ${destino}.`} />
    <meta property="og:image" content={portada} />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={`Ruta en bicicleta: ${titulo}`} />
    <meta name="twitter:description" content={`Explora ${titulo}, una ruta ideal para el ciclismo en ${destino}.`} />
    <meta name="twitter:image" content={portada} />
    <MiniHeader />
    <BtnRutas />
    <main class="mx-auto rounded-xl my-6 max-w-[1200px] bg-page-300 bg-opacity-50">
        <img loading="lazy" class="w-full h-96 md:h-[600px] rounded-t-xl top-0 object-cover" src={portada} alt=`FotografÃ­a de ${titulo}`>
        <div class="mx-8">
            <h1 class="font-bold text-3xl my-4">{titulo}</h1>
            <div class="grid gap-y-4 sm:grid-cols-3  md:grid-cols-5 items-center font-medium my-10 ">
                <span class="flex gap-1 mx-auto"><img class="size-7" src="/icons/ubicacion.svg">{destino}</span>
                <div class="grid gap-y-4 grid-cols-2">
                    <span class="flex gap-1 items-center mx-auto"><img class="size-7" src="/icons/distancia.svg">{distancia}</span>
                    <span class="flex gap-1 items-center mx-auto"><img class="size-7" src="/icons/desnivel.svg">{desnivel}</span>
                    <span class="flex gap-1 items-center mx-auto"><img class="size-7" src="/icons/max.svg">{alt_max}</span>
                    <span class="flex gap-1 items-center mx-auto"><img class="size-7" src="/icons/min.svg">{alt_min}</span>
                </div>
            </div>
            <span class=`${bgcolor} rounded-2xl p-2 font-medium`>{dificultad}</span>
            <p class="mt-8"><Content /></p>
            <h2 class="font-semibold text-2xl my-6">Mapa de la Ruta</h2>
        </div>
        <img loading="lazy" class="rounded-b-xl" src={mapa_img} alt=`Mapa de la ruta de ${titulo}`>
    </main>
</Layout>